<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[PND4]]></title>
  <link href="http://pnd4.github.io/atom.xml" rel="self"/>
  <link href="http://pnd4.github.io/"/>
  <updated>2014-03-09T18:27:55-07:00</updated>
  <id>http://pnd4.github.io/</id>
  <author>
    <name><![CDATA[]]></name>
    <email><![CDATA[kevin@pnd4.net]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[OpenVPN Hang Issue]]></title>
    <link href="http://pnd4.github.io/blog/2013/12/05/ovpn-hang/"/>
    <updated>2013-12-05T00:00:00-08:00</updated>
    <id>http://pnd4.github.io/blog/2013/12/05/ovpn-hang</id>
    <content type="html"><![CDATA[<h1>Problem</h1>

<p>CyberGhostVPN connection hangs on service start-up
Doesnt</p>

<h1>Investigation</h1>

<h4>DNS</h4>

<p><strong>Dec 05 2013 &ndash; 04:38</strong></p>

<p>Seems CyberGhost uses a constantly renewing IP.. &ldquo;US.openvpn.cyberghostvpn.com&rdquo; resolved to at least 3 different IPs over the last 1-2 hrs. This caused the daemon to start up, fail because of something regarding the certificate, then repeatedly fail resolving until manually stopping the daemon.</p>

<p>The thread below talks about tuning openvpn to fix this.</p>

<blockquote><p>By default, on initial startup and restart, the &mdash;remote name is resolved
once. If the DNS resolve fails, OpenVPN will abort.</p>

<p>If &mdash;resolve-retry is specified, the DNS resolve will be retried for n
seconds. After n seconds, if the DNS lookup has not been successful, OpenVPN
will abort. Recent versions of OpenVPN allow n to be &ldquo;infinite&rdquo;.</p>

<p>If you want to disable the DNS re-resolve on restart, you can use
&mdash;persist-remote-ip. This will &ldquo;recycle&rdquo; the previously used &mdash;remote IP
address without doing a new DNS lookup.</p></blockquote>

<p><a href="http://osdir.com/ml/network.openvpn.user/2004-02/msg00130.html">OVPN Resolve-Retry and Ping-Restart</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[CLI RTMP Streaming]]></title>
    <link href="http://pnd4.github.io/blog/2013/11/23/rtmpdump/"/>
    <updated>2013-11-23T00:00:00-08:00</updated>
    <id>http://pnd4.github.io/blog/2013/11/23/rtmpdump</id>
    <content type="html"><![CDATA[<p>As of 2013, some streams require the &lsquo;ksv&rsquo;/&lsquo;k-s-v&rsquo; patch.. Arch users can use <strong>rtmpdump-ksv</strong> instead of <strong>rtmpdump</strong></p>

<h3>Commands</h3>

<p>Redirect rtmp port using iptables.</p>

<pre><code>sudo iptables -t nat -A OUTPUT -p tcp --dport 1935 -j REDIRECT
</code></pre>

<p>Sniffing for stream parameters.</p>

<pre><code>rtmpsrv
</code></pre>

<p>Once you&rsquo;ve captured a stream, you can undo the redirection.</p>

<pre><code>sudo iptables -t nat -D OUTPUT -p tcp --dport 1935 -j REDIRECT
</code></pre>

<p>Use rtmpdump like so, piping the output to mplayer/vlc</p>

<pre><code>rtmpdump -q -r "rtmpe://origin.hdcast.org:1935/redirect/" -a "redirect/" -f "LNX 11,9,900,152" -W "http://www.udemy.com/static/flash/player5.9.swf" -p "http://www.hdcast.org/embedlive2.php?u=ban5&amp;vw=640&amp;vh=460&amp;domain=www.btsportshd.com" -y "ban5" -b "10000" -v | mplayer -really-quiet -framedrop -
</code></pre>

<h4>Important options</h4>

<p>rtmpdump</p>

<ul>
<li>-r [tcURL ex. &ldquo;rtmp://stream.url/&rdquo;]</li>
<li>-a [app ex. &ldquo;redirect/&rdquo;</li>
<li>-y [playpath ex. &ldquo;freetv4&rdquo;]</li>
<li>-v [live]</li>
<li>-b [buffersize ex. &ldquo;10000&rdquo;]</li>
<li>-W [swfURL ex. &ldquo;<a href="http://stream.url/flash/player5.9.swf">http://stream.url/flash/player5.9.swf</a>&rdquo;]</li>
</ul>


<p>mplayer</p>

<ul>
<li>-really-quiet [Suppresses output.]</li>
<li>-framedrop [Helps with streams.]</li>
<li><ul>
<li>[Plays from stdout.]</li>
</ul>
</li>
</ul>


<h4>Port redirect helper script</h4>

<p>I wrote a bash script that takes the hard part, remembering, out of the <strong>iptables</strong> step.</p>

<div>
  <pre><code class='bash'>#!/bin/bash

## PND4
## o1.27.13

success() {
  echo &quot;.. success :)&quot;
}

failure() {
  echo &quot;-- FAILURE :(&quot;
}

add-rule() {
  sudo iptables -t nat -A OUTPUT -p tcp --dport 1935 -j REDIRECT
}

del-rule() {
  sudo iptables -t nat -D OUTPUT -p tcp --dport 1935 -j REDIRECT
}

case &quot;$1&quot; in
  start)
    echo &quot;Starting..&quot;
    # also delete rule if it exists for some reason to avoid dupes.
    # always errors out so we ignore it
    del-rule 2&gt;/dev/null
    add-rule
    [ $? -eq 0 ] &amp;&amp; success || failure
    ;;
  stop)
    echo &quot;Stopping..&quot;
    del-rule
    [ $? -eq 0 ] &amp;&amp; success || failure
    ;;
  *)
    echo &quot;Usage: $0 &lt;start|stop&gt;&quot;
    ;;
esac</code></pre>
</div>


<h4>Useful Links and References</h4>

<ol>
<li><a href="http://stream-recorder.com/forum/tutorial-simply-use-rtmpsrv-and-example-t6325.html?p=18142">rtmpsrv tutorial</a></li>
<li><a href="http://trac.xbmc.org/ticket/14089">XBMC: hint on buffer option</a></li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Motion Webcam]]></title>
    <link href="http://pnd4.github.io/blog/2013/11/11/motion-webcam/"/>
    <updated>2013-11-11T00:00:00-08:00</updated>
    <id>http://pnd4.github.io/blog/2013/11/11/motion-webcam</id>
    <content type="html"><![CDATA[<h3>Webcam Prices</h3>

<p>11.11.2013
&ndash; 20-23 HD-3000
&ndash; 15-20 Rocketfish 720p RF-HDWEB
&ndash; 17 M$ HD-2300</p>

<h3><a href="http://forum.micasaverde.com/index.php?topic=9104.15">RasPi Notes</a></h3>

<p>RasPi community has good info on the subject. Should be valid for Pogoplugs too.</p>

<blockquote><p>My Raspberry Pi was ordered just over a month ago and supposedly I&rsquo;ll have it in another two months. A friend of mine ordered one two weeks ago and he already has his.  ???</p>

<p>In the interim I wanted to chip in with some experiences I have using USB webcams with Vera. I attached mine to Pogoplugs running Archlinux ARM. That distro is available for the Raspberry Pi and I&rsquo;ve been very happy with it on my Pogoplugs. You should be able to support streaming quite a few webcams on your Raspberry Pi, I have as many as four hanging off my Pogoplugs.</p>

<p>A few recommendations I have for streaming USB webcams with linux:</p>

<ol>
<li><p>Unless you need the capabilities of motion (that is, you are using the motion detection built in to motion) use mjpg_streamer instead of motion. Motion processes each image to see if pixels have changed, and by default runs a lot of binary morphology on the images (erode, dilate, etc), where mjpg_streamer just streams. On my Pogoplus with four cameras this means the difference between 60%+ cpu utilization versus single digits (and to get down to 60% I had to drop the framerate to 2Hz and go through a bunch of options to turn off as much processing as possible). I have another machine running zoneminder which processes my streams which is why I don&rsquo;t mind forgoing motion detection.</p></li>
<li><p>Use MJPEG instead of YUV
If you want multiple webcams on a single USB bus this is basically a necessity. Even if you don&rsquo;t it means a lot less data to process. This is the default in mjpg_streamer, in motion set: &ldquo;v4l2_palette 2&rdquo; in motion.conf</p></li>
<li><p>Get a webcam with known support
Some webcams have a problem where the request a lot more bandwidth than they need and this means you can&rsquo;t use two at the same time. There is a hack to get around this in YUV mode, but not MJPEG which isn&rsquo;t much of a help. If you are up for hacking the driver yourself it should be possible to skip the BW check and make these work anyway, but that is quite a bit of work.</p></li>
</ol>


<p>Cameras that work simultaneously (no bandwidth bug):
-Logitech C120
-Logitech C160
-Logitech B500
-Logitech Quickcam E 3500
-Logitech Quickcam Messenger
-Microsoft HD-3000
-Microsoft HD-5000
-Rocketfish HD Webcam Pro</p>

<p>Cameras that do not work in multiples (bandwidth bug?):
-Logitech C110
-Logitech C310
-Creative Live! Cam Video IM Ultra
-HP 2-Megapixel Webcam (RZ406AA)</p>

<p>My current recommendation is probably the HD-3000. It is 720p and can be found for about $20. It does NOT have autofocus which I think is good for a webcam you leave running 24/7. I tried the HD-5000 and it spends a lot of time refocusing. I&rsquo;m afraid it would break after a few weeks. The C160 is currently the cheapest, about $8 shipped on ebay. Meritline sometimes sells it for $6. The irritating thing about the c120/c160 is that they have a focusing ring you have to adjust. For a security camera I would prefer fixed focus. I buy any webcam I can get at a firesale so I&rsquo;ll keep trying more &ndash; I would appreciate results from anyone else as well.</p>

<p>EDIT: Added a few more cameras]</p>

<p>It turns out you can disable autofocus on UVC supported webcams like this:</p>

<p>v4l2-ctl &mdash;verbose &mdash;set-ctrl=focus_auto=0</p>

<p>At least it works for me on all the AF cameras I have to test (Microsoft &amp; Rocketfish).</p>

<p>Not only is this a good idea for camera longevity (I would think so at least) it helps prevents false motion alarms.</p></blockquote>

<h4>Useful Links and References</h4>

<ol>
<li><a href="http://elinux.org/RPi_USB_Webcams">eLinux: RasPi Webcam compatibility list</a></li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Gentoo - Genkernel Upgrade Steps]]></title>
    <link href="http://pnd4.github.io/blog/2013/11/09/gentoo-genkernel-upgrade/"/>
    <updated>2013-11-09T00:00:00-08:00</updated>
    <id>http://pnd4.github.io/blog/2013/11/09/gentoo-genkernel-upgrade</id>
    <content type="html"><![CDATA[<p>I use genkernel to install my kernel.. this isn&rsquo;t the best way to do things but for now it gets the job done. Gentoo isn&rsquo;t my primary distro so I sometimes forget the steps to go through when they push a new kernel.</p>

<h3>TL;DR/Commands</h3>

<p>After using &lsquo;eselect kernel [list|set #]&rsquo; to switch to the latest version</p>

<div>
  <pre><code class='bash'>zcat /proc/config.gz &gt; /usr/src/linux
    cd /usr/src/linux
    make oldconfig
    make modules_prepare
    emerge --ask @module-rebuild
    make
    # Now sit and wait til your childen get old and put you in a retirement home.
    make modules_install
    genkernel --no-menuconfig --no-clean --install all
    # Update your bootloader&#39;s config
    # Reboot and cross your fingers

    # Clean-up/delete old files from /boot
    # Clean-up old bootloader entries</code></pre>
</div>


<h4>Useful Links and References</h4>

<ol>
<li><a href="https://wiki.gentoo.org/wiki/Kernel/Upgrade" title="Kernel/Upgrade">Gentoo Wiki: Kernel/Upgrade</a></li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[IPTables + Transmission + VPN]]></title>
    <link href="http://pnd4.github.io/blog/2013/11/04/iptables-transmission-vpn/"/>
    <updated>2013-11-04T00:00:00-08:00</updated>
    <id>http://pnd4.github.io/blog/2013/11/04/iptables-transmission-vpn</id>
    <content type="html"><![CDATA[<p>Transmission doesn&rsquo;t have a way to bind to specific interfaces without patching, and I like the simplicity of using a package manager like &lsquo;pacman&rsquo; vs patching &lsquo;BindInterface&rsquo; into Transmission and building it from source. The work-around, since Transmission can bind to an IP, is to run a script with cron periodically.
The script should basically:</p>

<ul>
<li>first make sure the VPN is up and operational</li>
<li>correct transmission&rsquo;s config if the address isn&rsquo;t current.. [stop, edit, start]</li>
<li>definitely end with transmission running</li>
</ul>


<h3>Quote</h3>

<blockquote><p>Enforcing an application, for example a torrent client like Transmission, to always use the VPN interface or any particular network interface for that matter, is trivially simple using iptables on Debian, Ubuntu or any other GNU/Linux distro.
Personally, I am running Debian Sid on the Raspberry Pi. Occasionally I use it for downloading files ( legal stuff, seriously, believe me :D  ) using Transmission Bittorrent client over a VPN connection. Sometimes it happens that the VPN connection fails and doesn&rsquo;t reconnect for whatever reason and Transmission continues pulling stuff directly over my internet connection, which I would like to avoid. Fortunately it is very straightforward to enforce rules based on application owner UID. Transmission runs under the owner debian-transmission in Debian (use htop to check this) and the following two lines of iptables ensures that any process with owner having UID, debian-transmission, will not use any other network interface apart from the OpenVPN tunnel interface tun0</p></blockquote>

<pre><code>iptables -A OUTPUT -m owner --uid-owner debian-transmission -d 192.168.0.100 -j ACCEPT
iptables -A OUTPUT -m owner --uid-owner debian-transmission \! -o tun0 -j REJECT
</code></pre>

<blockquote><p>The first line ensures that, my Mac-mini having IP address 192.168.0.100 on the lan, can always access the web interface of transmission. The second line makes sure, no outgoing traffic can leave via anything other that tun0.
Peace of mind restored, thanks to iptables.</p></blockquote>

<h3>Code</h3>

<p>transmission-vpn-only.sh</p>

<p><em>Ver. ArchLinuxARM-110413</em></p>

<div>
  <pre><code class='bash'>#!/bin/sh

iface=&quot;tun0&quot;
service=&quot;transmission.service&quot;
config=&quot;/var/lib/transmission/.config/transmission-daemon/settings.json&quot;

# test if service is currently running
systemctl --quiet is-active $service
if [ $? -eq 0 ]; then
    # get the ip from the current config
    savedIP=$(cat $config | egrep -o &#39;\&quot;bind-address-ipv4\&quot;: \&quot;[^ ]*&#39; | cut -d&#39;&quot;&#39; -f4)
    # test if ip has changed and is no longer available
    ping -i1 -w2 -c1 $savedIP &gt;/dev/null
    if [[ $? -ne 0 || &quot;x$savedIP&quot; == &quot;x0.0.0.0&quot; ]]; then
        echo IP unavailable, stop and reconfigure transmission..
        systemctl stop $service
        # test if VPN went down completely
        ifconfig $iface &gt;/dev/null
        if [ $? -ne 0 ]; then
            echo Oops.. $iface not available, exiting without restarting transmission..
            exit 1
        fi
        # reconfigure transmission with new ip address
        sed -i &quot;s/\&quot;bind-address-ipv4\&quot;:.*\$/\&quot;bind-address-ipv4\&quot;: \&quot;$(ip a show dev $iface | egrep -o &#39;inet [^ ]* &#39; | cut -d&#39; &#39; -f2 | sed &#39;s/ //&#39;)\&quot;,/&quot; $config
        systemctl start $service
        echo Transmission started.
    fi
else
    echo &quot;Transmission isn&#39;t running..&quot;
    exit 1
fi</code></pre>
</div>


<h3>To-Do</h3>

<ul>
<li>Figure out how to &lsquo;BindInterface&rsquo;, if possible.</li>
<li>Revise transmission-vpn-only script.</li>
<li>Figure out why openvpn config leaves routes behind.</li>
</ul>


<h4>Useful Links and References</h4>

<ol>
<li><a href="http://www.botcyb.org/2012/11/force-application-to-use-vpn-using.html" title="BotCyborg">BotCyborg</a></li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Solidworks Rig]]></title>
    <link href="http://pnd4.github.io/blog/2013/10/21/solidworks-build/"/>
    <updated>2013-10-21T00:00:00-07:00</updated>
    <id>http://pnd4.github.io/blog/2013/10/21/solidworks-build</id>
    <content type="html"><![CDATA[<h4>Min Reqs (Win7x64)</h4>

<pre><code>CPU     Intel or AMD with SSE2 support. 64-bit OS recommended.
RAM     2GB+
HDD     5GB+
Video   Quadro/QuadroFX/FireGL/FirePro
</code></pre>

<h2>Notes regarding HW selection</h2>

<ul>
<li><a href="http://www.newegg.com/Product/Product.aspx?Item=N82E16814195112">FirePro v3900</a> was best bang for buck. Good Solidworks reviews.</li>
<li>4GB of RAM will work, can always upgrade.</li>
<li>3.5Ghz Dual core + Hyper-Threading (<a href="http://www.newegg.com/Product/Product.aspx?Item=N82E16819116775">i3-3220</a>/3240) should be plenty.</li>
</ul>


<p><a href="http://www.capinc.com/support/tips/solidworks-tech-tips-hardware">Capinc Solidworks HW Tips</a></p>

<ul>
<li>Video Card: VERY important</li>
<li>Proc: Solidworks is optimized for multiple cores</li>
<li>RAM:
Solidworks grabs 340mb on launch.
4gb+ is only necessary for very large assemblies (over 10,000 parts)</li>
<li>HD: Generally, does not affect Solidworks performance</li>
</ul>


<h2>Newegg specials for Oct.</h2>

<p><strong>&ldquo;i5&rdquo; Combo + FirePro V3900 [ ~$630 ] (until 10/25)</strong></p>

<p>Someone mentioned i5 &amp; i7&rsquo;s have decent enough graphics to run Solidworks.. maybe just get FirePro later, if needed?</p>

<ul>
<li>Trustworthy PSU</li>
<li>i5 is Quad Core, 8MB-L2, HD4000 &lsquo;integrated&rsquo; gfx</li>
<li>8GB RAM</li>
<li>1TB HDD, SSD would&rsquo;ve been nicer.</li>
<li>USB 3.0</li>
<li><p>No case.</p>

<p>  <a href="http://www.newegg.com/Product/ComboBundleDetails.aspx?ItemList=Combo.1291151">Combo: 1291151</a></p></li>
</ul>


<p><strong>&ldquo;i3&rdquo; Combo + FirePro V3900 [ ~$ 430 ] (until 10/31)</strong></p>

<ul>
<li>Decent PSU. But low wattage.</li>
<li>500GB HDD</li>
<li>USB 3.0</li>
<li><p>Plain Case.</p>

<p>  <a href="http://www.newegg.com/Product/ComboBundleDetails.aspx?ItemList=Combo.1271103">Combo: 1271103</a></p></li>
</ul>


<p><strong>&ldquo;Budget Gaming&rdquo; Combo [ $ 370 ] (until 10/31)</strong></p>

<ul>
<li>nVidia GT 640 2GB, instead of FirePro ?<br/>
  .. donno if that&rsquo;s such a good idea.</li>
<li>Good PSU</li>
<li>500GB HDD</li>
<li>USB 3.0</li>
<li><p>Decent looking case.</p>

<p>  <a href="http://www.newegg.com/Product/ComboBundleDetails.aspx?ItemList=Combo.1461943">Combo: 1461943</a></p></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Hostapd]]></title>
    <link href="http://pnd4.github.io/blog/2013/10/18/hostapd/"/>
    <updated>2013-10-18T00:00:00-07:00</updated>
    <id>http://pnd4.github.io/blog/2013/10/18/hostapd</id>
    <content type="html"><![CDATA[<p>Wireless access point daemon</p>

<p><strong>Karma</strong> a version of hostapd for creating <em>rogue</em> access points.</p>

<h3>NAT or Bridge</h3>

<p>IP&rsquo;s must be handed out to the connecting clients so one or the other must be configured</p>

<ul>
<li>NAT &ndash; creates a new subnet &ldquo;.. with IP forwarding/masquerading and DHCP service (wireless clients will use a dedicated subnet, data from/to that subnet is NAT-ted &mdash; similar to a normal WiFi router that&rsquo;s connected to your DSL or cable modem)&rdquo; &mdash; Archwiki

<blockquote><p>see the <a href="http://pnd4.github.io/blog/2013/10/16/firewall">Firewalls</a> article</p></blockquote></li>
<li>Bridge &ndash; &ldquo;.. Simple, but it requires that any service that&rsquo;s needed by your wireless clients (like, DHCP) is available on your computers external interface. That means it will not work if you have a dialup connection (e.g., via PPPoE or a 3G modem) or if you&rsquo;re using a cable modem that will supply exactly one IP address to you via DHCP.&rdquo; &mdash;ArchWiki

<blockquote><p>You need to create a network bridge and add your network interface (e.g. eth0) to it. You should not add the wireless device (e.g. wlan0) to the bridge; hostapd will add it on its own.</p>

<p>If you use netctl, see Bridge with netctl for details (just do not add tap0 used in that example).</p></blockquote></li>
</ul>


<h3>Configuration</h3>

<p>System configuration is stored in /etc/hostapd/hostapd.conf.</p>

<p>To override at runtime:</p>

<pre><code>sudo hostapd /path/to/hostapd.conf
</code></pre>

<p>General use, non-Karma, WPA/WPA2 config<br/>
From <a href="https://nims11.wordpress.com/2012/04/27/hostapd-the-linux-way-to-create-virtual-wifi-access-point/">nims.wordpress.com</a></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#sets the wifi interface to use, is wlan0 in most cases
</span><span class='line'>interface=wlan0
</span><span class='line'>#driver to use, nl80211 works in most cases
</span><span class='line'>driver=nl80211
</span><span class='line'>#sets the ssid of the virtual wifi access point
</span><span class='line'>ssid=dontMessWithVincentValentine
</span><span class='line'>#sets the mode of wifi, depends upon the devices you will be using. It can be a,b,g,n. Setting to g ensures backward compatiblity.
</span><span class='line'>hw_mode=g
</span><span class='line'>#sets the channel for your wifi
</span><span class='line'>channel=6
</span><span class='line'>#macaddr_acl sets options for mac address filtering. 0 means "accept unless in deny list"
</span><span class='line'>macaddr_acl=0
</span><span class='line'>#setting ignore_broadcast_ssid to 1 will disable the broadcasting of ssid
</span><span class='line'>ignore_broadcast_ssid=0
</span><span class='line'>#Sets authentication algorithm
</span><span class='line'>#1 - only open system authentication
</span><span class='line'>#2 - both open system authentication and shared key authentication
</span><span class='line'>auth_algs=1
</span><span class='line'> 
</span><span class='line'>#####Sets WPA and WPA2 authentication#####
</span><span class='line'>#wpa option sets which wpa implementation to use
</span><span class='line'>#1 - wpa only
</span><span class='line'>#2 - wpa2 only
</span><span class='line'>#3 - both
</span><span class='line'> wpa=3
</span><span class='line'>#sets wpa passphrase required by the clients to authenticate themselves on the network
</span><span class='line'> wpa_passphrase=KeePGuessinG
</span><span class='line'>#sets wpa key management
</span><span class='line'> wpa_key_mgmt=WPA-PSK
</span><span class='line'>#sets encryption used by WPA
</span><span class='line'> wpa_pairwise=TKIP
</span><span class='line'>#sets encryption used by WPA2
</span><span class='line'> rsn_pairwise=CCMP
</span><span class='line'>  
</span><span class='line'>#################################
</span><span class='line'>   
</span><span class='line'>#####Sets WEP authentication#####
</span><span class='line'>#WEP is not recommended as it can be easily broken into
</span><span class='line'>   wep_default_key=0
</span><span class='line'>   wep_key0=qwert    #5,13, or 16 characters
</span><span class='line'>#optionally you may also define wep_key2, wep_key3, and wep_key4
</span><span class='line'>    
</span><span class='line'>#################################
</span><span class='line'>#For No encryption, you don't need to set any options</span></code></pre></td></tr></table></div></figure>


<p>non-Karma w/ WPA2</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>interface=tpl0
</span><span class='line'>driver=nl80211
</span><span class='line'>ssid=2WIRE022
</span><span class='line'>hw_mode=g
</span><span class='line'>channel=10
</span><span class='line'>macaddr_acl=0
</span><span class='line'>auth_algs=1
</span><span class='line'>ignore_broadcast_ssid=0
</span><span class='line'>wpa=2
</span><span class='line'>wpa_passphrase=SecretPassword1234
</span><span class='line'>wpa_key_mgmt=WPA-PSK
</span><span class='line'>rsn_pairwise=CCMP</span></code></pre></td></tr></table></div></figure>


<p>Karma w/ WEP</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># config file to use with the Karma'd version of hostapd
</span><span class='line'># created by Robin Wood - robin@digininja.org - www.digininja.org
</span><span class='line'>
</span><span class='line'>interface=tpl0
</span><span class='line'>driver=nl80211
</span><span class='line'>country_code=US
</span><span class='line'>
</span><span class='line'>ssid=AndroidAP
</span><span class='line'>channel=3
</span><span class='line'>
</span><span class='line'>wep_default_key=0
</span><span class='line'>wep_key0=SecretPassword1234
</span><span class='line'>
</span><span class='line'># Both open and shared auth
</span><span class='line'>auth_algs=3
</span><span class='line'>
</span><span class='line'># no SSID cloaking
</span><span class='line'>ignore_broadcast_ssid=0
</span><span class='line'>
</span><span class='line'># -1 = log all messages
</span><span class='line'>logger_syslog=-1
</span><span class='line'>logger_stdout=-1
</span><span class='line'>
</span><span class='line'># 2 = informational messages
</span><span class='line'>logger_syslog_level=2
</span><span class='line'>logger_stdout_level=2
</span><span class='line'>
</span><span class='line'># Dump file for state information (on SIGUSR1)
</span><span class='line'># example: kill -USR1 &lt;pid&gt;
</span><span class='line'>dump_file=/tmp/hostapd.dump
</span><span class='line'>ctrl_interface=/var/run/hostapd
</span><span class='line'>ctrl_interface_group=adm
</span><span class='line'>
</span><span class='line'># 0 = accept unless in deny list
</span><span class='line'>macaddr_acl=0
</span><span class='line'>
</span><span class='line'># only used if you want to do filter by MAC address
</span><span class='line'>accept_mac_file=/etc/hostapd/hostapd.accept
</span><span class='line'>deny_mac_file=/etc/hostapd/hostapd.deny
</span><span class='line'>
</span><span class='line'># Finally, enable Karma
</span><span class='line'>enable_karma=0
</span><span class='line'>
</span><span class='line'># Black and white listing
</span><span class='line'># 0 = white
</span><span class='line'># 1 = black
</span><span class='line'>karma_black_white=1</span></code></pre></td></tr></table></div></figure>


<h5>Useful links and references</h5>

<p><a href="https://wiki.archlinux.org/index.php/Software_Access_Point">ArchWiki: Software Access Point</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Octopress]]></title>
    <link href="http://pnd4.github.io/blog/2013/10/17/octopress/"/>
    <updated>2013-10-17T00:00:00-07:00</updated>
    <id>http://pnd4.github.io/blog/2013/10/17/octopress</id>
    <content type="html"><![CDATA[<p>Markdown blogging platform built on Ruby.</p>

<h3>Installation</h3>

<p>First install ruby.
Then clone repo</p>

<pre><code>git clone git://github.com/imathis/octopress.git octopress
cd octopress
</code></pre>

<p>Install dependencies</p>

<pre><code>sudo gem install bundler
bundle install # make sure to run this one in the 'octopress' directory
</code></pre>

<p>Install default theme</p>

<pre><code>rake install
</code></pre>

<h3>Useful Links and References</h3>

<p><a href="http://octopress.org" title="Octopress Official Site">Octopress.org</a></p>

<p><a href="http://jekyllrb.com/docs" title="Jekyll's Documentation">Jekyll Docs</a></p>

<p><a href="http://blog.bigdinosaur.org/changing-octopresss-header/" title="Calling all noobs">BigdinosaurBlog: Changing Octopress&#8217; Header</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[GIT Version Control System]]></title>
    <link href="http://pnd4.github.io/blog/2013/10/17/git/"/>
    <updated>2013-10-17T00:00:00-07:00</updated>
    <id>http://pnd4.github.io/blog/2013/10/17/git</id>
    <content type="html"><![CDATA[<h2>Starting a new repo</h2>

<p>create project directory</p>

<pre><code>mkdir -p &lt;folder&gt;
cd &lt;folder&gt;
</code></pre>

<p>create files or copy them from existing project.</p>

<pre><code>touch README.md
</code></pre>

<p>initialize barebone git files</p>

<pre><code>git init
</code></pre>

<p>prepare commit with annotations and files</p>

<pre><code>git add README.md
git commit -m "&lt;message&gt;"
</code></pre>

<p>new project, so create remote origin, and master branch</p>

<pre><code>git remote add origin &lt;url | git@github.com:pnd4/&lt;project&gt;.git"
</code></pre>

<p>publish files to the new git-repository</p>

<pre><code>git push -u origin master
</code></pre>

<h2>Tips from the IRC guys</h2>

<p><em>Excerpt from: freenode_#crunchbang-offtopic_20130929.log</em></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[00:04:25] &lt;Ferus&gt; also thats why you git pull
</span><span class='line'>[00:04:28] &lt;Ferus&gt; all the time
</span><span class='line'>[00:04:29] &lt;Ferus&gt; lel
</span><span class='line'>[00:04:33] &lt;orik&gt; xD
</span><span class='line'>[00:04:57] * Ferus passes pnd4 an american spirit black
</span><span class='line'>[00:04:59] &lt;pnd4&gt; hmm whats the diff between git pull and clone?
</span><span class='line'>[00:05:00] &lt;orik&gt; well phoronix even has good things to say about mpv
</span><span class='line'>[00:05:10] &lt;orik&gt; a pull just checks for changes and
</span><span class='line'>[00:05:19] &lt;Ferus&gt; clone clones a new repo, pull pulls the new changes from master
</span><span class='line'>[00:05:26] &lt;orik&gt; ^^
</span><span class='line'>[00:05:27] &lt;pnd4&gt; oh ok.. thanks
</span><span class='line'>[00:05:50] &lt;orik&gt; man I've been using git at work for the past three months and I swear I still don't fully understand it
</span><span class='line'>[00:05:56] &lt;Ferus&gt; tl;dr if the repo doesnt exist locally, you clone from master, if it does exist locally, you pull from master
</span><span class='line'>[00:06:19] &lt;Ferus&gt; orik: i've been using git for two years, i broke my repo 5 months ago and havent fixed it
</span><span class='line'>[00:06:34] &lt;Ferus&gt; (i dont know how ;_;)
</span><span class='line'>[00:07:41] &lt;pnd4&gt; ok so Ive cloned dwmstatus earlier, made changes. if I do a pull, does it undo my changes to match the current master?
</span><span class='line'>[00:07:52] *** Joins: salam4ik (~salam4ik@89.106.233.158)
</span><span class='line'>[00:08:10] * pnd4 copies directory and just tries it.. 'banzai!'
</span><span class='line'>[00:08:21] &lt;Ferus&gt; no, it'll complain that you have un-stashed changed
</span><span class='line'>[00:08:23] &lt;Ferus&gt; changes*
</span><span class='line'>[00:08:39] &lt;Ferus&gt; so you want to do `git stash; git pull; git stash pop`
</span><span class='line'>[00:09:05] &lt;pnd4&gt; stash, thats a new one too.. did I mention I'm quite new to git ? haha.
</span><span class='line'>[00:09:17] &lt;Ferus&gt; (this is all i know how to do)
</span><span class='line'>[00:09:27] &lt;Ferus&gt; besides add and rm, but thats kinda obvious
</span><span class='line'>[00:09:44] &lt;pnd4&gt; thanks. I'll try and remember that if/when suckless puts out a new version
</span><span class='line'>[00:10:49] &lt;pnd4&gt; I think having familiarity with git should help in the job search.. I mean, who wouldn't want a guy that's familiar with widely used version control systems?
</span><span class='line'>[00:10:49] &lt;Ferus&gt; you can always google it
</span><span class='line'>[00:11:46] &lt;pnd4&gt; that is true, but the tl;dr versions are always nice
</span><span class='line'>[00:12:52] &lt;pnd4&gt; Halts: ebay has the hat I want for 25 (down from 35$) .. they're out of my size.. I share your pain.
</span><span class='line'>[00:14:05] &lt;pnd4&gt; its like that scene in 'The Last Samurai' where they cut his hair
</span><span class='line'>[00:15:40] &lt;Halts&gt; at least you can buy your hat.
</span><span class='line'>[00:16:01] &lt;pnd4&gt; would you buy your jersey still if it was 120 ?
</span><span class='line'>[00:16:59] &lt;Ferus&gt; &gt; IP Location: Kingston / New York / United States
</span><span class='line'>[00:17:08] &lt;Ferus&gt; bahaha this site is horrible, cant even geolocate
</span><span class='line'>[00:18:22] &lt;Halts&gt; haha, not right now.
</span><span class='line'>[00:18:28] &lt;Halts&gt; but I eventually would, yes.
</span><span class='line'>[00:18:40] &lt;Halts&gt; I'd like to get it for
</span><span class='line'>[00:18:50] &lt;Halts&gt; but, a bunch of cunts ruined that
</span><span class='line'>[00:19:57] *** Quits: orik (~orik@50-46-134-47.evrt.wa.frontiernet.net) (Remote host closed the connection)
</span><span class='line'>[00:20:51] &lt;n2o4&gt; pnd4: Just checkout your features into it's own branch, for example git clone foobar, git checkout -b my-super-branch, make edits and commit, issue git checkout master to check into the master branch again.</span></code></pre></td></tr></table></div></figure>


<h2>Useful Links and References</h2>

<ol>
<li><a href="https://github.com">GitHub</a></li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Markdown Template]]></title>
    <link href="http://pnd4.github.io/blog/2013/10/16/template/"/>
    <updated>2013-10-16T00:00:00-07:00</updated>
    <id>http://pnd4.github.io/blog/2013/10/16/template</id>
    <content type="html"><![CDATA[<p>A template for markdown posts. Covers some frequently used syntax.</p>

<h3>Quote</h3>

<blockquote><p>More.<br/>
Notes.</p></blockquote>

<h3>Code</h3>

<p>example.sh</p>

<div>
  <pre><code class='bash'>#!/bin/bash
    test 1 -eq 1 &amp;&amp; echo true || echo false</code></pre>
</div>


<h3>List</h3>

<ul>
<li>item 1</li>
<li>item 2</li>
<li>item 3</li>
</ul>


<h4>Useful Links and References</h4>

<ol>
<li><a href="http://wiki.archlinux.org" title="Alt Title">ArchWiki</a></li>
<li><a href="http://wiki.archlinux.org">DebianWiki</a></li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Ruby Installation]]></title>
    <link href="http://pnd4.github.io/blog/2013/10/16/ruby-install/"/>
    <updated>2013-10-16T00:00:00-07:00</updated>
    <id>http://pnd4.github.io/blog/2013/10/16/ruby-install</id>
    <content type="html"><![CDATA[<p>Ruby can be confusing to install. Make sure to plan out if per-user environments are going to be used, or system-wide (Ruby, Gems, etc installed by root).</p>

<h2>Installing</h2>

<p>Instead of using rvm or rbenv, stick to installing Ruby system-wide with pacman.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>pacman -S ruby</span></code></pre></td></tr></table></div></figure>


<h2>Paths</h2>

<p>Caution editing your .bashrc or .zshrc.. root does not need to have a GEM_HOME or ~/.gem/ruby/2.0.0 added to its PATH</p>

<h3>~/.gemrc</h3>

<p>For root, create .gemrc so that when gems are installed as root, it uses the system-wide directory.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gem: --no-user-install</span></code></pre></td></tr></table></div></figure>


<p>Optionally, create user&rsquo;s .gemrc as well, although it&rsquo;d be the same as in /etc/gemrc, which is automatically made by the ArchPkg</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gem: --user-install</span></code></pre></td></tr></table></div></figure>


<h2>Updating Gems</h2>

<p>Update system:  sudo gem update &mdash;system
Update user:  gem update</p>

<h2>Useful Links and References</h2>

<p><a href="https://wiki.archlinux.org/index.php/Ruby">Archwiki: Ruby</a></p>

<p><a href="https://projects.archlinux.org/svntogit/packages.git/tree/trunk/ruby.install?h=packages/ruby">Note from ArchDev about .gemrc</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Wifi Pinapple Mark 5]]></title>
    <link href="http://pnd4.github.io/blog/2013/10/16/pinapple-v/"/>
    <updated>2013-10-16T00:00:00-07:00</updated>
    <id>http://pnd4.github.io/blog/2013/10/16/pinapple-v</id>
    <content type="html"><![CDATA[<p>Advanced standalone pentesting tool for wireless networks.</p>

<h3>Specs</h3>

<blockquote><p>AR9331 and RTL8187
16mb ROM / 64mb DDR2 RAM</p></blockquote>

<h3>Software</h3>

<p>&ldquo;Available Pentest Packages include aircrack-ng, dsniff, easy-creds, ettercap, hping3, httptunnel, karma, kismet, macchanger, mdk3, ngrep, nmap, nodogsplash captive portal, privoxy, ptunnel, snort, sslsniff, sslstrip, ssltunnel, stunnel, tcpdump, tor, and reaver.&rdquo; &mdash;HakShop</p>

<h3>Useful Links and References</h3>

<p><a href="http://hakshop.myshopify.com/collections/wifi-pineapple/products/wifi-pineapple" title="Wifi Pinapple Mark 5">HakShop: Wifi Pinapple Mark 5</a></p>

<p><a href="https://wifipineapple.com/index.php">wifipinapple.com</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Firewalls]]></title>
    <link href="http://pnd4.github.io/blog/2013/10/16/firewall/"/>
    <updated>2013-10-16T00:00:00-07:00</updated>
    <id>http://pnd4.github.io/blog/2013/10/16/firewall</id>
    <content type="html"><![CDATA[<p>Use <strong>iptables</strong> to secure netlink infrastructure.</p>

<h3>Where the rules files go</h3>

<p>In Arch, the usual /etc/iptables/iptables.rules
In Gentoo, the rules are restored from /var/lib/iptables/rules-save
In Debian, wiki says to create /etc/network/if-pre-up.d/iptables (chmod +x)</p>

<h3>Rules Basic Template</h3>

<p>Based on: <a href="https://wiki.archlinux.org/index.php/Simple_Stateful_Firewall">https://wiki.archlinux.org/index.php/Simple_Stateful_Firewall</a></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>*filter
</span><span class='line'>:INPUT DROP [0:0]
</span><span class='line'>:FORWARD DROP [0:0]
</span><span class='line'>:OUTPUT ACCEPT [0:0]
</span><span class='line'>:TCP - [0:0]
</span><span class='line'>:UDP - [0:0]
</span><span class='line'>## === BEGIN: First Rule ======================================
</span><span class='line'># Keep before ping limiting rules to limit pings per connection
</span><span class='line'>-I INPUT -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT
</span><span class='line'>## === END: First Rule ========================================
</span><span class='line'>## === BEGIN: Ping limiting ===================================
</span><span class='line'># Keep after 'RELATED, ESTABLISHED' to limit pings per connection
</span><span class='line'>-A INPUT -p icmp --icmp-type echo-request -m recent --name ping_limiter --set
</span><span class='line'>-A INPUT -p icmp --icmp-type echo-request -m recent --name ping_limiter --update --hitcount 6 --seconds 10 -j DROP
</span><span class='line'>-A INPUT -p icmp --icmp-type echo-request -j ACCEPT
</span><span class='line'>## === END: Ping limiting =====================================
</span><span class='line'>## === BEGIN: General Rules ===================================
</span><span class='line'># Extra protection against spoofing attacks (see: sysctl regarding rp_filter)
</span><span class='line'>-I INPUT ! -i lo -s 127.0.0.0/8 -j DROP
</span><span class='line'># Accept all traffic coming from localhost
</span><span class='line'>-A INPUT -i lo -j ACCEPT
</span><span class='line'>-A INPUT -d 127.0.0.0/8 -j REJECT
</span><span class='line'>-A INPUT -m conntrack --ctstate INVALID -j DROP
</span><span class='line'>-A INPUT -p tcp -m tcp --tcp-flags FIN,SYN,RST,ACK SYN -m conntrack --ctstate NEW -j TCP
</span><span class='line'>-A INPUT -p udp -m conntrack --ctstate NEW -j UDP
</span><span class='line'>## === END: General Rules =====================================
</span><span class='line'>## === BEGIN: Services ========================================
</span><span class='line'>## NTP
</span><span class='line'>#-A UDP -p tcp -i eth0 -s 192.168.12.0/24 --dport 123 -j ACCEPT
</span><span class='line'>## SSH
</span><span class='line'>#-A TCP -p tcp -i eth0 -s 192.168.12.0/24 --dport 22 -j ACCEPT
</span><span class='line'>## TRANSMISSION
</span><span class='line'>#Allow transmission to talk to users
</span><span class='line'>-A OUTPUT -m owner --uid-owner transmission -d 192.168.12.18 -j ACCEPT
</span><span class='line'>#Restrict transmission from using other ports.
</span><span class='line'>-A OUTPUT -m owner --uid-owner transmission ! -o tun+ -j REJECT
</span><span class='line'>#Allow users to talk to transmission
</span><span class='line'>-A TCP -p tcp -s 192.168.12.18 --dport 9091 -j ACCEPT
</span><span class='line'>## === END: Services ==========================================
</span><span class='line'>## === BEGIN: Trick Port Scanning =============================
</span><span class='line'>-I TCP -p tcp -m recent --update --seconds 60 --name TCP-PORTSCAN -j REJECT --reject-with tcp-rst
</span><span class='line'>-I UDP -p udp -m recent --update --seconds 60 --name UDP-PORTSCAN -j REJECT --reject-with port-unreach
</span><span class='line'>-A INPUT -p tcp -m recent --set --name TCP-PORTSCAN -j REJECT --reject-with tcp-rst
</span><span class='line'>-A INPUT -p udp -m recent --set --name UDP-PORTSCAN -j REJECT --reject-with icmp-port-unreach
</span><span class='line'>## === END: Trick Port Scanning ===============================
</span><span class='line'>## === BEGIN: Last Rule =======================================
</span><span class='line'># This rule must be kept at the end, regardless if port-scan or ping limit is used.
</span><span class='line'>-A INPUT -j REJECT --reject-with icmp-proto-unreachable
</span><span class='line'>## === END: Last Rule =========================================
</span><span class='line'>COMMIT</span></code></pre></td></tr></table></div></figure>


<h3>Internet Connection Sharing</h3>

<p>Involves adding additional rules</p>

<p><em>For the template below:</em></p>

<pre><code>|          |              wan |             lan  |  
|---------:|-----------------:|-----------------:|  
|  iface   |             wan0 |            lan0  |  
|  subnet  |     192.168.12.0 |    172.168.42.0  |  
</code></pre>

<p><em>Example Template</em></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>*nat
</span><span class='line'>:PREROUTING ACCEPT [0:0]
</span><span class='line'>:INPUT ACCEPT [0:0]
</span><span class='line'>:OUTPUT ACCEPT [0:0]
</span><span class='line'>:POSTROUTING ACCEPT [0:0]
</span><span class='line'>-A POSTROUTING -s 172.16.42.0/24 -o wan0 -j MASQUERADE
</span><span class='line'>COMMIT
</span><span class='line'>*filter
</span><span class='line'>:INPUT ACCEPT [0:0]
</span><span class='line'>:FORWARD DROP [0:0]
</span><span class='line'>:OUTPUT ACCEPT [0:0]
</span><span class='line'>:fw-interfaces - [0:0]
</span><span class='line'>:fw-open - [0:0]
</span><span class='line'>-A FORWARD -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT
</span><span class='line'>-A FORWARD -j fw-interfaces
</span><span class='line'>-A FORWARD -j fw-open
</span><span class='line'>-A FORWARD -j REJECT --reject-with icmp-host-unreachable
</span><span class='line'>-A fw-interfaces -i lan0 -j ACCEPT
</span><span class='line'>COMMIT</span></code></pre></td></tr></table></div></figure>


<h4>References</h4>

<p><a href="https://wiki.archlinux.org/index.php/Simple_Stateful_Firewall">Archwiki</a><br/>
<a href="https://wiki.debian.org/iptables">Debwiki</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Backing up Configuration]]></title>
    <link href="http://pnd4.github.io/blog/2013/10/16/backup-configs/"/>
    <updated>2013-10-16T00:00:00-07:00</updated>
    <id>http://pnd4.github.io/blog/2013/10/16/backup-configs</id>
    <content type="html"><![CDATA[<h2>To-do</h2>

<p>Pseudocode/Outline
Write Code
Keep adding to list of files.</p>

<h2>Brainstorm / Plans</h2>

<p>Purpose: Simplify backing up configs.
Ideas
&ndash; Parse a list of files (backup_files.lst?)
&ndash; Copy files to a directory (~/backup_<date> ?)
&ndash; Archive the files?
&ndash; Encrypt?</p>

<h2>Files to backup</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>~/.zshrc
</span><span class='line'>~/.zsh/
</span><span class='line'>~/.Xresources
</span><span class='line'>~/.xinitrc
</span><span class='line'>~/.vimrc
</span><span class='line'>~/.vim_runtime
</span><span class='line'>~/.tmux.conf
</span><span class='line'>~/.ssh/
</span><span class='line'>~/.gnupg
</span><span class='line'>~/.conkyrc
</span><span class='line'>~/.config
</span><span class='line'>~/.dzen
</span><span class='line'>~/.bashrc</span></code></pre></td></tr></table></div></figure>


<h2>Script code</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#!/bin/bash
</span><span class='line'>echo "Backing up config.."
</span><span class='line'>echo "Processing $currentFile"
</span><span class='line'>if [$? -eq 1]; then
</span><span class='line'>    # move to next file
</span><span class='line'>else
</span><span class='line'>    # prompt user to continue
</span><span class='line'>fi
</span><span class='line'>echo "Done"</span></code></pre></td></tr></table></div></figure>


<p>[^1] Reference one. <a href="http://wiki.archlinux.org">http://wiki.archlinux.org</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Test Post]]></title>
    <link href="http://pnd4.github.io/blog/1985/10/26/test-post/"/>
    <updated>1985-10-26T00:00:00-07:00</updated>
    <id>http://pnd4.github.io/blog/1985/10/26/test-post</id>
    <content type="html"><![CDATA[<p>This is a test post writen in markdown. To learn more about markdown check out the <a href="http://daringfireball.net/projects/markdown/">documentation</a> on <a href="http://daringfireball.net/">Daring Fireball</a>.</p>
]]></content>
  </entry>
  
</feed>
